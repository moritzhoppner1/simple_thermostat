# Example configuration for Simple Thermostat
# Add this to your Home Assistant configuration.yaml

climate:
  # Living Room Example - Single TRV (Simplified Config)
  - platform: simple_thermostat
    name: "Living Room"
    unique_id: "living_room_thermostat"

    # Sensor IDs (automatically constructs full entity IDs)
    temperature_sensor_id: living_room  # Creates: sensor.living_room_temperature
    trv_ids:
      - living_room_trv  # Creates: number.living_room_trv_pi_heating_demand, climate.living_room_trv

    # Preset temperatures (°C)
    away_temp: 18.0       # When away from home
    present_temp: 21.0    # Normal comfortable temperature
    cosy_temp: 23.0       # Extra warm

    # Control thresholds
    binary_threshold: 0.5   # Use binary control when error exceeds this threshold
    hysteresis: 0.3         # Prevent rapid cycling in binary mode

    # Remote temperature sync (send external temp to TRV every 25 min)
    sync_remote_temp: true

    # Initial preset on startup
    initial_preset: present

  # Kitchen Example - Multiple TRVs in one room (Simplified Config)
  - platform: simple_thermostat
    name: "Kitchen"
    unique_id: "kitchen_thermostat"

    # Sensor IDs
    temperature_sensor_id: kitchen
    trv_ids:
      - kitchen_trv_1
      - kitchen_trv_2

    # Preset temperatures
    away_temp: 16.0
    present_temp: 20.0
    cosy_temp: 22.0

    # Control thresholds (defaults shown)
    binary_threshold: 0.5
    hysteresis: 0.3

    sync_remote_temp: true
    initial_preset: present

  # Bedroom Example - Lower temperatures (Simplified Config)
  - platform: simple_thermostat
    name: "Bedroom"
    unique_id: "bedroom_thermostat"

    temperature_sensor_id: bedroom
    trv_ids:
      - bedroom_trv

    # Cooler preset temperatures for sleeping
    away_temp: 16.0
    present_temp: 18.0
    cosy_temp: 20.0

    binary_threshold: 0.5
    hysteresis: 0.3
    sync_remote_temp: true
    initial_preset: present

  # Advanced Example - Explicit entity IDs (if auto-construction doesn't work)
  - platform: simple_thermostat
    name: "Office"
    unique_id: "office_thermostat"

    temperature_sensor: sensor.office_temperature

    # Use explicit entity IDs instead of trv_ids
    valve_entities:
      - number.custom_valve_name_pi_heating_demand
    climate_entities:
      - climate.custom_climate_name

    away_temp: 18.0
    present_temp: 21.0
    cosy_temp: 23.0

# ============================================
# NOTES
# ============================================

# Control Modes:
# 1. BINARY HEAT (error > binary_threshold): valve=100%, TRV temp=30°C
# 2. PROPORTIONAL (error ±binary_threshold): TRV calculates valve based on temp setpoint
# 3. BINARY COOL (error < -binary_threshold): valve=0%, TRV temp=5°C

# Preset Temperatures:
# - Change via UI or service: climate.set_preset_mode
# - Manually setting temperature clears preset
# - Presets: away, present, cosy, off

# Entity Naming:
# For thermostat named "Living Room", creates:
#   - climate.living_room
#   - sensor.living_room_control_mode
#   - sensor.living_room_temperature_error
#   - binary_sensor.living_room_heating
#   - sensor.living_room_trv_1_internal_temp
#   - sensor.living_room_trv_1_target_temp
#   - binary_sensor.living_room_trv_1_heating
#   (and per-TRV sensors for each additional TRV)

# Requirements:
# - Bosch BTH-RA TRVs connected via Zigbee2MQTT
# - External temperature sensor in each room
# - MQTT integration configured in Home Assistant